<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Skill Bridge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style22.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>AOS.init();</script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
          <div class="logo">
            <a href="index.html">
              Skill<span class="logo-accent">Bridge</span>
            </a>
          </div>
          <div class="main-menu">
            <ul>
              <li><a href="index.html">Home</a></li>
              <li class="dropdown">
                <a href="#">Surfaces</a>
                <div class="dropdown-content">
                  <a href="Skillswapsearchpage.html"><i class="fas fa-laptop"></i>Skill Swap</a>
                  <a href="online-tutorial request.html"><i class="fas fa-chalkboard-teacher"></i>Online Tutorial</a>
                  <a href="event.html"><i class="fas fa-calendar-alt"></i> Upcoming Events</a>
                </div>
              </li>
              <li><a href="aboutus.html">About Us</a></li>
              <li><a href="contactus.html">Contact Us</a></li>
              <li><a href="signup.html" class="btn" id="signup-btn"><i class="fas fa-user"></i> Sign Up</a></li>
              <li><a href="login.html" class="btn" id="login-btn"><i class="fas fa-sign-in-alt"></i> Log In</a></li>
            </ul>
          </div>
          <button class="hamburger-button">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
          </button>
          <div class="sidebar">
            <div class="sidebar-header">
              <button type="button" class="close-sidebar">&times;</button>
            </div>
            <div class="sidebar-content">
              <div class="menu-section">
                <a href="profilepage.html"><i class="fas fa-user"></i> Personal Details</a>
                <a href="payment.html"><i class="fas fa-crown"></i> Subscriptions</a>
                <a href="Skillswapsearchpage.html"><i class="fas fa-exchange-alt"></i> Swap Skill</a>
                <a href="chatspage.html"><i class="fas fa-envelope"></i> Messages</a>
                <a href="online-tutorial request.html"><i class="fas fa-chalkboard-teacher"></i> Online Tutorial</a>
                <a href="my-tutorials.html"><i class="fas fa-chalkboard-teacher"></i> My Tutorials</a>
                <a href="event.html"><i class="fas fa-calendar-alt"></i> Upcoming Events</a>
                <a href="my-events.html"><i class="fas fa-calendar-check"></i> My Events</a>
                <a href="Skillswap.html" role="button"><i class="fas fa-history"></i> Skills SwapHistory</a>
                <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
              </div>
              <div class="sidebar-section-title">Privacy Policy-Terms of Service</div>
              <div class="menu-section support-section">
                <a href="#" role="button"><i class="fas fa-question-circle"></i> Help & Feedback</a>
                <a href="login.html" class="login-btn"><i class="fas fa-sign-in-alt"></i> Log In</a>
                <a href="signup.html" class="signup-btn"><i class="fas fa-user-plus"></i> Sign Up</a>
              </div>
            </div>
          </div>
        </div>
      </nav>
  <section class="login-container">
    <div class="login-card">
      <div class="role-toggle">
        <span class="toggle-label">Student</span>
        <label class="switch">
          <input type="checkbox" id="roleToggle">
          <span class="slider round"></span>
        </label>
        <span class="toggle-label">Instructor</span>
      </div>
      
      <h2>Welcome Back!</h2>
      <p>Sign in to continue your learning journey</p>
      
      <form id="loginForm" class="login-form" autocomplete="on">
        <div class="form-group">
          <label for="email">Email Address</label>
          <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input type="email" id="email" name="email" required placeholder="Enter your email address" aria-label="Email Address" />
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="password" name="password" required placeholder="Enter your password" aria-label="Password" />
          </div>
        </div>
        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" id="remember" class="remember-checkbox">
            <label for="remember">Remember me</label>
          </div>
          <a href="forgot-password.html" class="forgot-password">Forgot Password?</a>
        </div>
        <button type="submit" class="btn btn-primary">Sign In</button>
      </form>
      <div class="social-login">
        <p>Or sign in with</p>
        <div class="social-buttons">
          <button class="social-btn google" aria-label="Sign in with Google">
            <i class="fab fa-google"></i>
            Google
          </button>
          <button class="social-btn linkedin" aria-label="Sign in with LinkedIn">
            <i class="fab fa-linkedin"></i>
            LinkedIn
          </button>
        </div>
      </div>
      
      <p class="signup-link">
        Don't have an account? <a href="signup.html" id="signupLink">Sign Up</a>
      </p>
    </div>
  </section>

  <style>
    .role-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .toggle-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
    }

    input:checked + .slider {
      background-color: var(--primary-color);
    }

    input:focus + .slider {
      box-shadow: 0 0 1px var(--primary-color);
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .slider.round {
      border-radius: 34px;
    }

    .slider.round:before {
      border-radius: 50%;
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const roleToggle = document.getElementById('roleToggle');
      const signupLink = document.getElementById('signupLink');
      const loginForm = document.getElementById('loginForm');
      const welcomeText = document.querySelector('.login-card h2');
      const subtitleText = document.querySelector('.login-card p');

      roleToggle.addEventListener('change', function() {
        if (this.checked) {
          // Instructor mode
          welcomeText.textContent = 'Welcome Back, Instructor!';
          subtitleText.textContent = 'Sign in to manage your teaching journey';
          signupLink.href = 'instructor-signup.html';
        } else {
          // Student mode
          welcomeText.textContent = 'Welcome Back!';
          subtitleText.textContent = 'Sign in to continue your learning journey';
          signupLink.href = 'signup.html';
        }
      });

      loginForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const isInstructor = roleToggle.checked;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const remember = document.getElementById('remember').checked;

        try {
          // Prepare login data (no role property)
          const loginData = {
            email,
            password
          };

          // Call your login API using fetch
          const response = await fetch('http://localhost:5000/api/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(loginData)
          });
          const data = await response.json();

          if (data.token && data.user) {
            // Store user data and token in localStorage
            localStorage.setItem('user', JSON.stringify(data.user));
            localStorage.setItem('token', data.token);

            // Redirect based on role and instructor status
            if (isInstructor) {
              if (data.user.is_instructor) {
                window.location.href = 'instructor-dashboard.html';
              } else {
                alert('You are not registered as an instructor.');
              }
            } else {
              window.location.href = 'index.html'; // or your student dashboard
            }
          } else {
            // Handle login error
            alert('Login failed: ' + (data.error || data.message || 'Unknown error'));
          }
        } catch (error) {
          console.error('Login error:', error);
          alert('An error occurred during login. Please try again.');
        }
      });
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  
  
  
    <!-- Authentication Scripts -->
    
    <script src="js/api.js"></script> 
    <script src="js/auth.js"></script>
    <script src="js/auth-init.js"></script>

    <script src="js/fixed_merged_main.js"></script>
  
    
</body>
</html>